<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jo Malone London | Scent Finder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Jo Malone Cream & Black -->
    <!-- Application Structure Plan: A linear, multi-screen SPA flow. The user progresses through a four-step quiz, to a loading screen, and finally to a detailed results page. This structure offers deep personalization while maintaining a minimalist, intuitive flow. The results page educates the user on "Fragrance Combining™" by presenting a highly personalized base scent and two layering options. -->
    <!-- Visualization & Content Choices: The core interaction is an evocative, multi-step quiz. Goal: Gather a nuanced user profile based on feeling, environment, intensity, and time of day. Method: Large, clickable HTML cards with descriptive text. Interaction: User selects a card, their choice is saved, and the next question is rendered. Justification: This narrative approach is more engaging and aligned with a luxury brand than simple forms. The result is a curated 3-scent story, dynamically generated by a scoring algorithm, which directly supports the brand's key marketing message of bespoke scent creation. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Lato', sans-serif;
            background-color: #FDFCF9; /* Jo Malone Cream */
            color: #1E1E1E;
        }
        .font-serif {
            font-family: 'Cormorant Garamond', serif;
        }
        .fade-in {
            animation: fadeIn 0.8s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .progress-bar-inner {
            transition: width 0.5s ease-in-out;
        }
    </style>
</head>
<body class="antialiased">

    <div id="app" class="min-h-screen flex flex-col items-center justify-center p-4">

        <!-- Screen 1: Welcome -->
        <section id="welcome-screen" class="text-center max-w-2xl mx-auto fade-in">
            <h1 class="font-serif text-5xl md:text-6xl font-semibold tracking-wider">JO MALONE</h1>
            <p class="text-sm tracking-[0.3em] font-light">L O N D O N</p>
            <h2 class="font-serif text-2xl md:text-3xl mt-8">The Art of Fragrance Combining™</h2>
            <p class="mt-6 text-lg text-gray-700">Discover a scent that’s uniquely yours. Answer a few questions to allow us to curate a personal fragrance story for you.</p>
            <button onclick="startQuiz()" class="mt-10 px-12 py-4 bg-black text-white font-normal text-sm tracking-widest hover:bg-gray-800 transition-colors duration-300">Begin</button>
        </section>

        <!-- Screen 2: Quiz -->
        <section id="quiz-screen" class="hidden w-full max-w-5xl mx-auto fade-in">
            <div id="progress-bar" class="w-full bg-gray-200 rounded-full h-1.5 mb-8">
                <div id="progress-bar-inner" class="bg-black h-1.5 rounded-full" style="width: 0%"></div>
            </div>
            <div id="quiz-content">
                <!-- Quiz questions will be injected here -->
            </div>
        </section>

        <!-- Screen 3: Loading -->
        <section id="loading-screen" class="hidden text-center max-w-lg mx-auto fade-in">
            <div class="w-12 h-12 border-2 border-dashed border-black rounded-full animate-spin mx-auto"></div>
            <h2 class="font-serif text-3xl mt-8">Curating Your Scents</h2>
            <p class="mt-4 text-lg text-gray-700">Finding the perfect combination...</p>
        </section>

        <!-- Screen 4: Results -->
        <section id="results-screen" class="hidden w-full max-w-6xl mx-auto fade-in">
            <div class="text-center">
                <h2 class="font-serif text-4xl md:text-5xl font-semibold">Your Personalised Scent Story</h2>
                <p class="text-lg mt-4 text-gray-700">Based on your preferences, we've selected a bespoke combination, just for you.</p>
            </div>
            <div id="results-container" class="mt-12">
                <!-- Results will be injected here -->
            </div>
            <div class="text-center mt-12">
                <button onclick="restartQuiz()" class="px-12 py-4 bg-black text-white font-normal text-sm tracking-widest hover:bg-gray-800 transition-colors duration-300">Start Over</button>
            </div>
        </section>

    </div>

    <script>
        // --- DATABASE ---
        const joMaloneFragrances = [
            { name: "Lime Basil & Mandarin Cologne", family: "Citrus", notes: "Mandarin, Basil, Amberwood", story: "Our signature fragrance. Peppery basil and aromatic white thyme bring an unexpected twist to the scent of limes on a Caribbean breeze.", productUrl: "#", pairingType: 'fresher', tags: ['uplifting', 'citrus', 'light', 'morning'] },
            { name: "Grapefruit Cologne", family: "Citrus", notes: "Grapefruit, Rosemary, Moss", story: "The brightness of grapefruit and tangerine, softened by the earthy notes of rosemary and moss.", productUrl: "#", pairingType: 'fresher', tags: ['uplifting', 'citrus', 'light', 'morning'] },
            { name: "Basil & Neroli Cologne", family: "Citrus", notes: "Basil, Neroli, White Musk", story: "A London lark. Quintessentially British, always playful. Fresh, fun, and full of adventure.", productUrl: "#", pairingType: 'fresher', tags: ['uplifting', 'floral', 'light', 'morning'] },
            { name: "Earl Grey & Cucumber Cologne", family: "Citrus", notes: "Bergamot, Cucumber, Beeswax", story: "A British tradition… afternoon tea. A fragrance with a burst of bergamot, distinctly Earl Grey, and the cool succulence of crunchy cucumber.", productUrl: "#", pairingType: 'base', tags: ['serene', 'citrus', 'light', 'morning'] },
            { name: "English Pear & Freesia Cologne", family: "Fruity", notes: "King William Pear, Freesia, Patchouli", story: "The essence of autumn. The sensuous freshness of just-ripe pears is wrapped in a bouquet of white freesias.", productUrl: "#", pairingType: 'base', tags: ['uplifting', 'fruity', 'versatile', 'goldenHour'] },
            { name: "Nectarine Blossom & Honey Cologne", family: "Fruity", notes: "Cassis, Acacia Honey, Peach", story: "London's Covent Garden early morning market. Succulent nectarine, peach and cassis and delicate spring flowers melt into the note of acacia honey.", productUrl: "#", pairingType: 'fresher', tags: ['uplifting', 'fruity', 'light', 'morning'] },
            { name: "Blackberry & Bay Cologne", family: "Fruity", notes: "Blackberry, Bay Leaves, Cedarwood", story: "Childhood memories of blackberry picking. A burst of deep, tart blackberry juice, blending with the freshness of just-gathered bay.", productUrl: "#", pairingType: 'fresher', tags: ['uplifting', 'fruity', 'light', 'morning'] },
            { name: "Wild Bluebell Cologne", family: "Fruity", notes: "Bluebell, Persimmon, White Musk", story: "Vibrant sapphire blooms in a shaded woodland. The delicate sweetness of dewy bluebells suffused with lily of the valley and a luscious twist of persimmon.", productUrl: "#", pairingType: 'base', tags: ['romantic', 'floral', 'light', 'goldenHour'] },
            { name: "Pomegranate Noir Cologne", family: "Fruity", notes: "Pomegranate, Casablanca Lily, Guaiacwood", story: "The sensuality of a daring red dress. Ruby-rich juices of pomegranate, spiked with pink pepper and laced with Casablanca lily.", productUrl: "#", pairingType: 'warmer', tags: ['confident', 'spicy', 'intense', 'evening'] },
            { name: "Peony & Blush Suede Cologne", family: "Floral", notes: "Red Apple, Peony, Suede", story: "The essence of charm. Peonies in voluptuous bloom, exquisitely fragile. Flirtatious with the juicy bite of red apple.", productUrl: "#", pairingType: 'base', tags: ['romantic', 'floral', 'versatile', 'goldenHour'] },
            { name: "Orange Blossom Cologne", family: "Floral", notes: "Clementine Flower, Orange Blossom, Orriswood", story: "A shimmering garden oasis. Clementine flower sparkles over a heart of orange blossom and water lily.", productUrl: "#", pairingType: 'fresher', tags: ['romantic', 'floral', 'light', 'morning'] },
            { name: "Lavender & Moonflower Cologne", family: "Floral", notes: "English Lavender, White Musk, Moonflowers", story: "Aromatic English lavender nestles in a cocooning base of white musk and night-blooming moonflowers.", productUrl: "#", pairingType: 'base', tags: ['serene', 'floral', 'versatile', 'evening'] },
            { name: "Red Roses Cologne", family: "Floral", notes: "Lemon, Red Roses Accord, Honeycomb", story: "A voluptuous blend of seven of the world's most exquisite roses. With crushed violet leaves and a hint of lemon.", productUrl: "#", pairingType: 'base', tags: ['romantic', 'floral', 'versatile', 'goldenHour'] },
            { name: "Scarlet Poppy Cologne Intense", family: "Floral", notes: "Ambrette, Scarlet Poppy, Tonka Bean", story: "From the wild steppes of Asia, home of the great scarlet poppy. A voluptuous floral, inspired by its extravagant blooms.", productUrl: "#", pairingType: 'warmer', tags: ['confident', 'floral', 'intense', 'evening'] },
            { name: "Velvet Rose & Oud Cologne Intense", family: "Floral", notes: "Clove, Damask Rose, Oud", story: "Darkest Damask rose. Rich and textural, wrapped with smoky oud wood. Spiked with clove, decadent with praline.", productUrl: "#", pairingType: 'warmer', tags: ['confident', 'spicy', 'intense', 'evening'] },
            { name: "Jasmine Sambac & Marigold Cologne Intense", family: "Floral", notes: "Marigold, Jasmine Sambac, Benzoin", story: "Serene fields of jasmine sambac. The most precious of jasmines, combined with the vibrant marigold, gathered at dawn.", productUrl: "#", pairingType: 'base', tags: ['romantic', 'floral', 'intense', 'goldenHour'] },
            { name: "Tuberose Angelica Cologne Intense", family: "Floral", notes: "Angelica, Tuberose, Amberwood", story: "The queen of white florals. Sensual. Touched with the green spiciness of angelica and summed up by the warmth of amberwood.", productUrl: "#", pairingType: 'warmer', tags: ['confident', 'floral', 'intense', 'evening'] },
            { name: "Wood Sage & Sea Salt Cologne", family: "Woody", notes: "Ambrette Seeds, Sea Salt, Sage", story: "Escape the everyday along the windswept shore. Waves breaking white, the air fresh with sea salt and spray.", productUrl: "#", pairingType: 'base', tags: ['serene', 'woody', 'versatile', 'goldenHour'] },
            { name: "Cypress & Grapevine Cologne Intense", family: "Woody", notes: "Cypress, Grapevine, Moss", story: "The verdant hanging gardens of a lost ancient world. A fresh, aromatic scent of cypress trees, powered with the warmth of grapevine.", productUrl: "#", pairingType: 'warmer', tags: ['confident', 'woody', 'intense', 'evening'] },
            { name: "Myrrh & Tonka Cologne Intense", family: "Woody", notes: "Lavender, Omumbiri Myrrh, Tonka Bean", story: "Rich, hand-harvested sap of the Namibian myrrh tree, mingling with the warm almond and lush vanilla notes of the tonka bean.", productUrl: "#", pairingType: 'warmer', tags: ['confident', 'spicy', 'intense', 'evening'] },
            { name: "Vetiver & Golden Vanilla Cologne Intense", family: "Woody", notes: "Cardamom, Vetiver Bourbon, Vanilla Bourbon", story: "A delectable spice opens a gourmand accord of vanilla bourbon, grounded by earthy vetiver.", productUrl: "#", pairingType: 'warmer', tags: ['serene', 'spicy', 'intense', 'evening'] },
            { name: "Oud & Bergamot Cologne Intense", family: "Woody", notes: "Bergamot, Cedarwood, Oud", story: "Precious oud, reframed. The mysterious, smoky character of this revered wood, is central to Middle Eastern fragrance traditions.", productUrl: "#", pairingType: 'warmer', tags: ['confident', 'woody', 'intense', 'evening'] },
            { name: "Dark Amber & Ginger Lily Cologne Intense", family: "Spicy", notes: "Black Cardamom, Black Orchid, Kyara Incense", story: "Enriched with amber and black orchid. Illuminated by the clean sensuality of black cardamom, ginger and water lily.", productUrl: "#", pairingType: 'warmer', tags: ['confident', 'spicy', 'intense', 'evening'] },
            { name: "Hinoki & Cedarwood Cologne Intense", family: "Spicy", notes: "Hinoki, Cedarwood, Amber", story: "A scent that captures the tranquility of a Japanese forest temple, with notes of hinoki wood, cedar, and warm amber.", productUrl: "#", pairingType: 'warmer', tags: ['serene', 'woody', 'intense', 'evening'] },
            { name: "Red Hibiscus Cologne Intense", family: "Spicy", notes: "Mandarin, Red Hibiscus, Vanilla", story: "A vivid solar floral. The red hibiscus is known for its enchanting petals and can be found in the heart of a tropical forest.", productUrl: "#", pairingType: 'base', tags: ['uplifting', 'floral', 'intense', 'goldenHour'] }
        ];

        const quizData = [
            {
                question: "What feeling do you want your new scent to inspire? ☀️",
                key: "feeling",
                answers: [
                    { text: "Effortless & Uplifted", value: "uplifting", description: "Like a fresh start to the day." },
                    { text: "Dreamy & Romantic", value: "romantic", description: "Like a walk through a blooming garden." },
                    { text: "Confident & Captivating", value: "confident", description: "Something memorable and unique." },
                    { text: "Grounded & Serene", value: "serene", description: "A feeling of calm and comfort." }
                ]
            },
            {
                question: "Picture your ideal weekend escape. Where are you? 🗺️",
                key: "environment",
                answers: [
                    { text: "A sun-drenched Italian coast", value: "Citrus", description: "Sipping lemonade by the sea." },
                    { text: "A charming cottage garden", value: "Floral", description: "Lush, and filled with flowers." },
                    { text: "An exotic, bustling market", value: "Spicy", description: "Filled with rare and intriguing spices." },
                    { text: "A quiet, historic library", value: "Woody", description: "With wood-paneled walls." }
                ]
            },
            {
                question: "How do you want your fragrance to present itself? ✨",
                key: "intensity",
                answers: [
                    { text: "A subtle secret", value: "light", description: "Just for me and those who get close." },
                    { text: "An elegant whisper", value: "versatile", description: "That follows me through the day." },
                    { text: "A rich, memorable statement", value: "intense", description: "For a special occasion." }
                ]
            },
            {
                question: "To finish, what time of day feels most like you? 🌓",
                key: "timeOfDay",
                answers: [
                    { text: "Bright Morning", value: "morning", description: "The energy and fresh possibilities of dawn." },
                    { text: "Golden Hour", value: "goldenHour", description: "The warm, beautiful glow before sunset." },
                    { text: "Enchanting Evening", value: "evening", description: "The mystery and sophistication of the night." }
                ]
            }
        ];

        // --- STATE MANAGEMENT ---
        let currentQuestionIndex = 0;
        const userAnswers = {};

        // --- DOM ELEMENTS & SCREENS ---
        const screens = { welcome: document.getElementById('welcome-screen'), quiz: document.getElementById('quiz-screen'), loading: document.getElementById('loading-screen'), results: document.getElementById('results-screen') };
        const quizContent = document.getElementById('quiz-content');
        const resultsContainer = document.getElementById('results-container');
        const progressBarInner = document.getElementById('progress-bar-inner');

        // --- NAVIGATION & RENDERING ---
        function showScreen(screenName) {
            Object.values(screens).forEach(screen => screen.classList.add('hidden'));
            screens[screenName].classList.remove('hidden');
        }

        function startQuiz() {
            currentQuestionIndex = 0;
            Object.keys(userAnswers).forEach(key => delete userAnswers[key]);
            renderQuestion();
            showScreen('quiz');
        }

        function restartQuiz() {
            showScreen('welcome');
        }

        function renderQuestion() {
            const questionData = quizData[currentQuestionIndex];
            const progressPercentage = ((currentQuestionIndex) / quizData.length) * 100;
            progressBarInner.style.width = `${progressPercentage}%`;

            let answersHtml = questionData.answers.map(answer => `
                <div onclick="selectAnswer('${questionData.key}', '${answer.value}')" 
                     class="border border-gray-300 p-8 text-center cursor-pointer hover:border-black hover:bg-white transition-all duration-300">
                    <h3 class="font-serif text-3xl font-semibold">${answer.text}</h3>
                    <p class="mt-2 text-gray-600">${answer.description}</p>
                </div>
            `).join('');

            quizContent.innerHTML = `
                <div class="text-center fade-in">
                    <h2 class="font-serif text-3xl md:text-4xl mb-10">${questionData.question}</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        ${answersHtml}
                    </div>
                </div>
            `;
        }
        
        function selectAnswer(key, value) {
            userAnswers[key] = value;
            currentQuestionIndex++;
            if (currentQuestionIndex < quizData.length) {
                renderQuestion();
            } else {
                getResults();
            }
        }
        
        function renderResults(recommendations) {
            const { base, pair1, pair2 } = recommendations;

            const renderFragrance = (fragrance, role, combinationText = '') => {
                let roleHtml = (role === 'base') ? `<p class="text-sm tracking-widest font-light uppercase">Your Base Scent</p>` : `<p class="text-sm tracking-widest font-light uppercase">${combinationText}</p>`;
                return `
                    <div class="text-center">
                        ${roleHtml}
                        <h3 class="font-serif text-3xl font-semibold mt-2">${fragrance.name}</h3>
                        <p class="mt-4 text-gray-700 max-w-sm mx-auto italic">"${fragrance.story}"</p>
                        <p class="mt-4 text-sm font-bold tracking-wider text-gray-500">NOTES: ${fragrance.notes}</p>
                        <a href="${fragrance.productUrl}" target="_blank" rel="noopener noreferrer" class="mt-6 inline-block w-full max-w-xs px-8 py-3 bg-black text-white font-normal text-sm tracking-widest hover:bg-gray-800 transition-colors duration-300">Discover</a>
                    </div>
                `;
            };

            resultsContainer.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-3 items-start gap-12">
                    ${renderFragrance(base, 'base')}
                    <div class="text-center">
                        <div class="flex items-center justify-center">
                           <div class="w-24 h-px bg-gray-300"></div><p class="mx-4 text-5xl font-serif">+</p><div class="w-24 h-px bg-gray-300"></div>
                        </div>
                        <div class="mt-8">${renderFragrance(pair1, 'pair', `Combine with...<br><strong>For a Fresher Scent</strong>`)}</div>
                        <div class="mt-12"><p class="text-gray-500 font-serif text-2xl">or</p></div>
                        <div class="mt-8">${renderFragrance(pair2, 'pair', `Combine with...<br><strong>For a Warmer Scent</strong>`)}</div>
                    </div>
                    <div class="text-center bg-white p-8 lg:p-12 border border-gray-200">
                         <p class="text-sm tracking-widest font-light uppercase">Your Bespoke Combination</p>
                         <h3 class="font-serif text-3xl font-semibold mt-2">${base.name}</h3>
                         <p class="font-serif text-3xl font-semibold">+</p>
                         <h3 class="font-serif text-3xl font-semibold">${pair1.name}</h3>
                         <p class="mt-6 text-gray-700 max-w-sm mx-auto">Create a vibrant, uplifting fragrance story. Or, for a different mood, combine your base with ${pair2.name} for a warm, sensual depth.</p>
                         <button onclick="restartQuiz()" class="mt-8 w-full max-w-xs px-8 py-3 border border-black text-black font-normal text-sm tracking-widest hover:bg-gray-100 transition-colors duration-300">Find Another</button>
                    </div>
                </div>
            `;
        }

        // --- API LOGIC (SIMULATED) ---
        async function getResults() {
            showScreen('loading');
            await new Promise(resolve => setTimeout(resolve, 2500));
            const recommendations = getMockRecommendations(userAnswers);
            renderResults(recommendations);
            showScreen('results');
        }

        function getMockRecommendations(answers) {
            const { feeling, environment, intensity, timeOfDay } = answers;

            const scoredFragrances = joMaloneFragrances.map(fragrance => {
                let score = 0;
                if (fragrance.family === environment) score += 5;
                if (fragrance.tags.includes(feeling)) score += 4;
                if (fragrance.tags.includes(timeOfDay)) score += 3;
                if (fragrance.tags.includes(intensity)) score += 4;
                
                // Special case for 'versatile' intensity
                if (intensity === 'versatile' && !fragrance.tags.includes('intense') && !fragrance.tags.includes('light')) {
                    score += 4;
                } else if (intensity === 'versatile') {
                    score += 2; // Give partial points if it's light or intense
                }

                return { ...fragrance, score };
            });

            scoredFragrances.sort((a, b) => b.score - a.score);
            const baseScent = scoredFragrances[0];

            let fresherPair = joMaloneFragrances.find(f => f.pairingType === 'fresher' && f.name !== baseScent.name);
            let warmerPair = joMaloneFragrances.find(f => f.pairingType === 'warmer' && f.name !== baseScent.name && f.name !== (fresherPair ? fresherPair.name : ''));

            if (!fresherPair) fresherPair = joMaloneFragrances.find(f => f.name !== baseScent.name);
            if (!warmerPair) warmerPair = joMaloneFragrances.find(f => f.name !== baseScent.name && f.name !== fresherPair.name);

            return { base: baseScent, pair1: fresherPair, pair2: warmerPair };
        }

        // Initial state
        showScreen('welcome');
    </script>
</body>
</html>
